<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title></title>
    <link rel="stylesheet" href="./css/photo.css" />
    <style type="text/css">
      #canvas {
        position: absolute;
        left: 0;
        top: 0;
        background-color: #000;
        display: none;
      }
    </style>
  </head>
  <body class="bg">
    <audio id="audio" src="./music/again.mp3" autoplay></audio>
    <div id="show" class="show">
      <div class="box" id="box">
        <img src="images/1.jpg" class="img1" />
        <img src="images/2.jpg" class="img2" />
        <img src="images/3.jpg" class="img3" />
        <img src="images/4.jpg" class="img4" />
        <img src="images/5.jpg" class="img5" />
        <img src="images/6.jpg" class="img6" />
        <img src="images/7.jpg" class="img7" />
        <img src="images/8.jpg" class="img8" />
        <img src="images/9.jpg" class="img9" />
        <img src="images/10.jpg" class="img10" />
      </div>
    </div>
  </body>
  <!-- <script>
    var body = document.body;
    var box = document.getElementById("box");
    var show = document.getElementById("show");
    show.onmouseenter = function () {
      box.style.backgroundImage = "url('./images/tou.jpg')";
    };
    show.onmouseout = function () {
      box.style.backgroundImage = "";
    };
  </script> -->
  <!-- music -->
  <script>
    (function () {
      var src = ["./music/again.mp3", "./music/xiaolu.mp3", "./music/fire.mp3"];
      var index = 0;
      var myAudio = document.getElementById("audio");
      window.addEventListener("click", function () {
        if (myAudio.paused) {
          myAudio.play();
        }
      });
      myAudio.addEventListener("ended", function () {
        index++;
        index = index === src.length ? 0 : index;
        myAudio.src = src[index];
      });
    })();
  </script>
  <script>
    var show = document.getElementById("show");
    window.addEventListener("muosemove", function (event) {
      event.c;
    });
  </script>
  <script>
    function throttle(fn, wait = 1000) {
      let timer;
      return function () {
        if (!timer) {
          timer = setTimeout(() => {
            fn.apply(this, arguments);
            clearTimeout(timer);
            timer = null;
          }, wait);
        }
      };
    }
    (function () {
      let deg = -25;
      const mousedown = (event) => {
        let originY = event.clientY;
        // 移动时
        document.onmousemove = throttle(function (event) {
          var distanceY = event.clientY - originY;
          var distanceDeg = distanceY / 18;
          deg = deg - distanceDeg;
          show.style.transform = `rotateX(${deg}deg) translateY(-150px)`;
          originY = event.clientY;
        }, 10);

        // 抬起时
        document.onmouseup = function () {
          document.onmousemove = null;
        };
      };

      // 按下时
      window.addEventListener("mousedown", mousedown, false);
    })();
  </script>
  <script>
    // preload audio
    (function () {
      var audioSrc = ["./music/xiaolu.mp3", "./music/fire.mp3"];
      function preload() {
        for (i = 0; i < audioSrc.length; i++) {
          var audio = new Audio();
          audio.src = audioSrc[i];
          audio.load();
        }
      }
      preload();
    })();
  </script>
</html>
